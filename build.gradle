/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.4.1/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
apply plugin: 'war'
apply plugin: 'maven'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'
apply plugin: 'org.akhikhl.gretty'
apply plugin: 'findbugs'
apply plugin: 'checkstyle'

sourceCompatibility = 1.8
targetCompatibility = 1.8

// 文字コードはUTF-8を指定しないとデフォでsjisになる
def defaultEncoding = 'UTF-8'
tasks.withType(AbstractCompile)*.options*.encoding = defaultEncoding
tasks.withType(GroovyCompile)*.groovyOptions*.encoding = defaultEncoding

//findbugs settings
findbugs{
	sourceSets = [project.sourceSets.main]
}
tasks.withType(FindBugs) {
    reports {
        xml.enabled = false
        html.enabled = true
    }
}

//checkstyle settings
checkstyle{
    toolVersion '7.6'
	//mainのみチェック(test は除外）
	sourceSets = [project.sourceSets.main]
}

repositories {
     jcenter()
}

buildscript {
    repositories {
    	jcenter()
    }
    dependencies {
        classpath 'org.akhikhl.gretty:gretty:+'
    }
}

dependencies {
    compile group: 'org.glassfish.jersey.containers', name: 'jersey-container-servlet-core', version:'2.26-b03'
    compile group: 'org.glassfish.jersey.media', name: 'jersey-media-moxy', version:'2.26-b03'
    compile group:'com.fasterxml.jackson.core', name:'jackson-databind', version:'2.8.4'
    testImplementation group:'org.glassfish.jersey.test-framework.providers', name: 'jersey-test-framework-provider-grizzly2', version:'2.26-b03'
    testImplementation group: 'junit', name: 'junit', version:'4.12'
    testCompile "org.spockframework:spock-core:1.1-groovy-2.4-rc-2";
}

